{"ast":null,"code":"import _regeneratorRuntime from\"/Users/avikghosh/Documents/Programming/yelp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/avikghosh/Documents/Programming/yelp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useContext}from'react';import RestaurantFinder from'../apis/RestaurantFinder';import{RestaurantsContext}from'../context/RestaurantsContext';import{useNavigate}from'react-router-dom';import StarRating from'./StarRating';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RestaurantList=function RestaurantList(props){var _useContext=useContext(RestaurantsContext),restaurants=_useContext.restaurants,setRestaurants=_useContext.setRestaurants;var _useContext2=useContext(RestaurantsContext),setAllReviews=_useContext2.setAllReviews;var navigate=useNavigate();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,response2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return RestaurantFinder.get(\"/restaurants\");case 3:response=_context.sent;setRestaurants(response.data.data.restaurant);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:_context.next=12;return RestaurantFinder.get(\"/all_reviews\");case 12:response2=_context.sent;setAllReviews(response2.data.data.allReviews);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e,id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.stopPropagation();try{RestaurantFinder.delete(\"/restaurants/\".concat(id));setRestaurants(restaurants.filter(function(restaurant){return restaurant.id!==id;}));}catch(err){console.log(err);}case 2:case\"end\":return _context2.stop();}},_callee2);}));return function handleDelete(_x,_x2){return _ref2.apply(this,arguments);};}();var handleUpdate=function handleUpdate(e,id){e.stopPropagation();navigate(\"restaurants/\".concat(id,\"/update\"));};var handleRestaurantSelect=function handleRestaurantSelect(id){navigate(\"/restaurants/\".concat(id));};var renderRating=function renderRating(restaurant){if(!restaurant.count){return/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary\",children:\"0 reviews\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StarRating,{rating:restaurant.average_rating}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary ml-1\",children:[restaurant.count,\" reviews\"]})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-light\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Restaurant\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Price Range\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:restaurants&&restaurants.map(function(restaurant){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRestaurantSelect(restaurant.id);},children:[/*#__PURE__*/_jsx(\"td\",{children:restaurant.name}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.location}),/*#__PURE__*/_jsx(\"td\",{children:\"$\".repeat(restaurant.price_range)}),/*#__PURE__*/_jsx(\"td\",{children:renderRating(restaurant)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleUpdate(e,restaurant.id);},className:\"btn btn-warning\",children:\"Update\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleDelete(e,restaurant.id);},className:\"btn btn-danger\",children:\"Delete\"})})]},restaurant.id);})})]})});};export default RestaurantList;","map":{"version":3,"names":["React","useEffect","useContext","RestaurantFinder","RestaurantsContext","useNavigate","StarRating","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RestaurantList","props","_useContext","restaurants","setRestaurants","_useContext2","setAllReviews","navigate","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","response2","wrap","_callee$","_context","prev","next","get","sent","data","restaurant","t0","console","log","allReviews","stop","apply","arguments","handleDelete","_ref2","_callee2","e","id","_callee2$","_context2","stopPropagation","delete","concat","filter","err","_x","_x2","handleUpdate","handleRestaurantSelect","renderRating","count","className","children","rating","average_rating","scope","map","onClick","name","location","repeat","price_range"],"sources":["/Users/avikghosh/Documents/Programming/yelp/client/src/components/RestaurantList.jsx"],"sourcesContent":["import React, {useEffect, useContext} from 'react'\nimport RestaurantFinder from '../apis/RestaurantFinder'\nimport { RestaurantsContext } from '../context/RestaurantsContext'\nimport { useNavigate } from 'react-router-dom';\nimport StarRating from './StarRating';\n\nconst RestaurantList = (props) => {\n\n    const {restaurants, setRestaurants} = useContext(RestaurantsContext);\n    const {setAllReviews} = useContext(RestaurantsContext);\n\n    const navigate = useNavigate()\n\n    useEffect(()=>{\n\n        const fetchData = async ()=>{\n            try {\n            const response = await RestaurantFinder.get(\"/restaurants\");\n            setRestaurants(response.data.data.restaurant);\n            }catch (err){\n                console.log(err)\n            }\n            const response2 = await RestaurantFinder.get(`/all_reviews`);\n            setAllReviews(response2.data.data.allReviews);\n        }\n        fetchData();\n\n    },[])\n\n    const handleDelete = async (e,id)=>{\n        e.stopPropagation();\n        try{\n            RestaurantFinder.delete(`/restaurants/${id}`)\n            setRestaurants(restaurants.filter(restaurant =>{\n                return restaurant.id !== id;\n            }))\n        }catch(err){\n            console.log(err)\n        }\n    }\n\n    const handleUpdate = (e,id)=>{\n        e.stopPropagation();\n        navigate(`restaurants/${id}/update`)\n    }\n\n    const handleRestaurantSelect = (id)=>{\n        navigate(`/restaurants/${id}`)\n    }\n\n    const renderRating = (restaurant) =>{\n        if (!restaurant.count){\n            return <p className=\"text-secondary\">0 reviews</p>\n        }\n        return (<>\n            <StarRating rating={restaurant.average_rating}/>\n            <p className=\"text-secondary ml-1\">{restaurant.count} reviews</p>\n        </>)\n    }\n  \n  return (\n    <div className=\"list-group\">\n        <table className=\"table table-striped table-hover\">\n            <thead>\n                <tr className=\"bg-light\">\n                    <th scope=\"col\">Restaurant</th>\n                    <th scope=\"col\">Location</th>\n                    <th scope=\"col\">Price Range</th>\n                    <th scope=\"col\">Rating</th>\n                    <th scope=\"col\">Edit</th>\n                    <th scope=\"col\">Delete</th>\n                </tr>\n            </thead>\n            <tbody>\n                {restaurants && restaurants.map(restaurant => {\n                    return(\n                        <tr key={restaurant.id} onClick = {()=>handleRestaurantSelect(restaurant.id)}>\n                            <td>{restaurant.name}</td>\n                            <td>{restaurant.location}</td>\n                            <td>{\"$\".repeat(restaurant.price_range)}</td>\n                            <td>{renderRating(restaurant)}</td>\n                            <td>\n                                <button onClick = {(e)=>handleUpdate(e,restaurant.id)} className=\"btn btn-warning\">Update</button>\n                            </td>\n                            <td>\n                                <button onClick = {(e)=>handleDelete(e,restaurant.id)} className=\"btn btn-danger\">Delete</button>\n                            </td>\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n    </div>\n  )\n}\n\nexport default RestaurantList"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}