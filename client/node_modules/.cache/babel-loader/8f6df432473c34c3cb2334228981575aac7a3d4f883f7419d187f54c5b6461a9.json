{"ast":null,"code":"import _regeneratorRuntime from\"/Users/avikghosh/Documents/Programming/yelp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/avikghosh/Documents/Programming/yelp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext,useEffect,useState}from'react';import{useParams}from'react-router-dom';import{RestaurantsContext}from'../context/RestaurantsContext';import RestaurantFinder from'../apis/RestaurantFinder';import Reviews from'../components/Reviews';import AddReview from'../components/AddReview';import StarRating from'../components/StarRating';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RestaurantDetailsPage=function RestaurantDetailsPage(props){var _useParams=useParams(),id=_useParams.id;var _useContext=useContext(RestaurantsContext),selectedRestaurant=_useContext.selectedRestaurant,setSelectedRestaurant=_useContext.setSelectedRestaurant;var _useContext2=useContext(RestaurantsContext),allReviews=_useContext2.allReviews,setAllReviews=_useContext2.setAllReviews;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,response2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return RestaurantFinder.get(\"/restaurants/\".concat(id));case 3:response=_context.sent;setSelectedRestaurant(response.data.data);_context.next=7;return RestaurantFinder.get(\"/all_reviews\");case 7:response2=_context.sent;setAllReviews(response2.data.data.allReviews);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[allReviews]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{children:selectedRestaurant&&selectedRestaurant.restaurant.name}),/*#__PURE__*/_jsx(\"h3\",{children:selectedRestaurant&&selectedRestaurant.restaurant.location}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(StarRating,{rating:selectedRestaurant&&selectedRestaurant.restaurant.average_rating}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary\",children:[selectedRestaurant&&selectedRestaurant.restaurant.count,\" Reviews\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{children:selectedRestaurant&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Reviews,{reviews:selectedRestaurant.reviews}),/*#__PURE__*/_jsx(AddReview,{})]})})})]});};export default RestaurantDetailsPage;","map":{"version":3,"names":["React","useContext","useEffect","useState","useParams","RestaurantsContext","RestaurantFinder","Reviews","AddReview","StarRating","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RestaurantDetailsPage","props","_useParams","id","_useContext","selectedRestaurant","setSelectedRestaurant","_useContext2","allReviews","setAllReviews","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","response2","wrap","_callee$","_context","prev","next","get","concat","sent","data","t0","console","log","stop","apply","arguments","className","children","restaurant","name","location","rating","average_rating","count","reviews"],"sources":["/Users/avikghosh/Documents/Programming/yelp/client/src/routes/RestaurantDetailsPage.jsx"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\nimport { useParams } from 'react-router-dom'\nimport { RestaurantsContext } from '../context/RestaurantsContext';\nimport RestaurantFinder from '../apis/RestaurantFinder';\nimport Reviews from '../components/Reviews';\nimport AddReview from '../components/AddReview';\nimport StarRating from '../components/StarRating';\n\nconst RestaurantDetailsPage = (props) => {\n\n  const {id} = useParams();\n  const {selectedRestaurant, setSelectedRestaurant} = useContext(RestaurantsContext);\n  const {allReviews, setAllReviews} = useContext(RestaurantsContext);\n\n  useEffect(()=>{\n\n    const fetchData = async ()=>{\n      try{\n        const response = await RestaurantFinder.get(`/restaurants/${id}`);\n        setSelectedRestaurant(response.data.data);\n\n        const response2 = await RestaurantFinder.get(`/all_reviews`);\n        setAllReviews(response2.data.data.allReviews);\n\n      } catch(err){\n        console.log(err)\n      }\n    }\n    fetchData();\n  },[allReviews]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"row text-center\">\n          <h1>{selectedRestaurant && selectedRestaurant.restaurant.name}</h1>\n          <h3>{selectedRestaurant && selectedRestaurant.restaurant.location}</h3>\n          <div className=\"text-center\">\n              <StarRating rating={selectedRestaurant && selectedRestaurant.restaurant.average_rating}/>\n              <p className=\"text-secondary\">{selectedRestaurant && selectedRestaurant.restaurant.count} Reviews\n              </p>\n          </div>\n      </div>\n      <div>\n        {selectedRestaurant && (\n          <>\n            <div className=\"mt-3\">\n              <Reviews reviews={selectedRestaurant.reviews}/>\n              <AddReview/>\n            </div>\n          </>\n        )}\n      </div>\n \n    </div>\n  )\n}\n\nexport default RestaurantDetailsPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}